{% extends 'shop/basic.htm' %}

{% block title %} Checkout - my awesome cart{% endblock%}

{% block body %}

<div class="container">
  <div class="col my-4">
    <h2>step 1 - My Awesome Cart Express Checkout - Review Your Cart Items</h2>
    <div>
      <ul class="list-group" id="items">

      </ul>
    </div>

  </div>
  <div class="col my-4  ">
    <h2>step 2 - Enter Address & Other Details:</h2>
    <form>
      <div class="form-row">
        <div class="form-group col-md-6">
          <label for="inputName">Name</label>
          <input type="Name" class="form-control" id="inputName" placeholder="Enter your Name">
        </div>

        <div class="form-group col-md-6">
          <label for="inputEmail4">Email</label>
          <input type="email" class="form-control" id="inputEmail" placeholder="Email">
        </div>

      </div>
      <div class="form-group">
        <label for="inputAddress">Address</label>
        <input type="text" class="form-control" id="inputAddress" placeholder="Address">
      </div>

      <div class="form-row">
        <div class="form-group col-md-6">
          <label for="inputCity">City</label>
          <input type="text" class="form-control" id="inputCity">
        </div>
        <div class="form-group col-md-4">
          <label for="inputState">State</label>
          <input type="text" class="form-control" id="inputState">
        </div>
        <div class="form-group col-md-2">
          <label for="inputZip">Zip</label>
          <input type="text" class="form-control" id="inputZip">
        </div>
      </div>
      <div class="form-group ">
        <label for="inputZip">Phone Number</label>
        <input type="tel" class="form-control" id="inputPhone">
      </div>
  </div>
  
  <button type="submit" class="btn btn-primary">Place Order</button>
  </form>
  <div>
    <div>



      {% endblock%}

      {% block css %} {% endblock%}

      {% block js %}
      <script>
        if (localStorage.getItem('cart') == null) {
          var cart = {};
        }
        else {
          cart = JSON.parse(localStorage.getItem('cart'));
        }
        console.log(cart);
        sum = 0;
        if ($.isEmptyObject(cart)) {
          mystr = `<p>Your cart is empty, please add some items to your cart, before checking out!</p>`;
          $('#items').append(mystr);
        } 
        else {
          for (item in cart) {
            let name = cart[item][1];
            let qty = cart[item][0];
            sum = sum + qty;
            mystr = `<li class="list-group-item d-flex justify-content-between align-items-center">
    ${name}
    <span class="badge badge-primary badge-pill">${qty}</span>
  </li>`
            $('#items').append(mystr);
          }
        }
        document.getElementById('cart').innerHTML = sum;
      </script>

      {% endblock%}